FROM eclipse-temurin:11-jre
RUN mkdir /opt/app
RUN mkdir /out
RUN mkdir /in
COPY --from=eu.gcr.io/hmf-build/common-resources-public:0.2 /data/resources/public/gene_panel /data/resources/gene_panel
COPY --from=eu.gcr.io/hmf-build/common-resources-public:0.2 /data/resources/public/disease_ontology /data/resources/disease_ontology
COPY --from=eu.gcr.io/hmf-pipeline-prod-e45b00f2/ops-resources-private:0.3.2 /ops/resources/private/serve /data/resources/serve
COPY --from=eu.gcr.io/hmf-pipeline-prod-e45b00f2/ops-resources-private:0.3.2 /ops/resources/private/clinical_transcripts /data/resources/clinical_transcripts
COPY ./target/protect-jar-with-dependencies.jar /opt/app/protect.jar
COPY ./run-docker.properties /opt/app/protect.properties
ENTRYPOINT ["java", "-jar", "/opt/app/protect.jar", "-properties_file", "/opt/app/protect.properties"]